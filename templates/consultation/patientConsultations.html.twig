{% extends 'base.html.twig' %}

{% block title %}Dashboard Médecin{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}
<div class="portal">

    <!-- SIDEBAR -->
    {% include 'side_bar.html.twig' %}


    <!-- MAIN CONTENT -->
    <main class="portal__main">

        <div class="portal__top">
            <div>
                <h1 class="portal__title">Mes Consultations</h1>
                <p class="portal__subtitle">Consultations que j'ai demandées — suivi du statut.</p>
            </div>

            <a href="{{ path('consultation_new') }}" class="btn btn--primary">Nouvelle Consultation</a>
        </div>

        <div class="portal__content">

            <div class="portal__card">
                {% if consultations is empty %}
                    <p>Vous n'avez pas encore demandé de consultation.</p>
                {% else %}
                    <div class="list">
                        {% for c in consultations %}
                            <div class="rowItem">
                                <div>
                                    <div class="rowItem__title">{{ c.motif }} — {{ c.dateConsultation ? c.dateConsultation|date('Y-m-d') ~ ' ' ~ c.timeSlot : 'TBD' }}</div>
                                    <div class="rowItem__meta">
                                        Date de création: {{ c.createdAt ? c.createdAt|date('d/m/Y H:i') : '—' }}
                                    </div>
                                </div>
                                <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
                                    {% if c.status == 'pending' %}
                                        <span style="background:rgba(255,193,7,.15);color:#FF9F00;padding:6px 12px;border-radius:8px;font-size:12px;font-weight:900">⏳ En attente</span>
                                    {% elseif c.status == 'accepted' %}
                                        <span style="background:rgba(19,184,194,.15);color:#13B8C2;padding:6px 12px;border-radius:8px;font-size:12px;font-weight:900">✅ Acceptée</span>
                                    {% elseif c.status == 'declined' %}
                                        <span style="background:rgba(255,107,107,.15);color:#FF6B6B;padding:6px 12px;border-radius:8px;font-size:12px;font-weight:900">❌ Refusée</span>
                                    {% endif %}
                                    <a href="{{ path('consultation_show', {'id': c.id}) }}" class="btn btn--ghost">Details</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

        </div>

    </main>

</div>

{% endblock %}





