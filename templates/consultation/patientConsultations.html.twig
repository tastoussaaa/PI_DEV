{% extends 'base.html.twig' %}

{% block title %}Dashboard M√©decin{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}
{% set navigation = [
    {'name': 'Dashboard', 'path': path('patient_dashboard'), 'icon': 'üè†'},
    {'name': 'Consultations', 'path': path('patient_consultations'), 'icon': 'ü©∫'},
    {'name': 'Nouvelle consultation', 'path': path('consultation_new'), 'icon': '‚ûï'},

   
] %}

<div class="portal">

    <!-- SIDEBAR -->
    <aside class="portal__side">

        <a href="#" class="portal__brand">
            <img src="{{ asset('assets/images/logo_mini.png') }}" class="portal__logo" alt="">
            <div>
                <div class="portal__name">Aidora</div>
                <div class="portal__tag">Espace Patient</div>
            </div>
        </a>

        <div class="portal__hello">
            <div class="portal__avatar">
                <img src="{{ asset('assets/images/avatar.png') }}" class="portal__logo" alt="">

            </div>
            <div>
                <div class="portal__hi">Bienvenue</div>
                <div class="portal__mail">
                    {{ app.user.name ?? 'Patient' }}
                </div>
            </div>
        </div>

        <nav class="portal__menu">
            {% for item in navigation %}
                <a href="{{ item.path }}"
                   class="portal__item {% if app.request.pathinfo == item.path %}is-active{% endif %}">
                    <span class="portal__icon">{{ item.icon }}</span>
                    <span>{{ item.name }}</span>
                </a>
            {% endfor %}
        </nav>

        <div class="portal__bottom">
            <a href="#" class="portal__logout">D√©connexion</a>
        </div>

    </aside>


    <!-- MAIN CONTENT -->
    <main class="portal__main">

        
        <div class="portal__content">   
            <h1>Consultations Patient</h1>
            <div class="consultations">
                {% if consultations is empty %}
                    <p>Aucune consultation trouv√©e.</p>
                {% else %}
                    <div class="consultations__list">
                        {% for c in consultations %}
                            <article class="card">
                                <div class="card__header">
                                    <strong>{{ c.name }} {{ c.familyName }}</strong>
                                    <small>{{ c.dateConsultation ? c.dateConsultation|date('d/m/Y H:i') : '' }}</small>
                                </div>
                                <div class="card__body">
                                    <p>{{ c.motif }}</p>
                                </div>
                                <div class="card__footer">
                                    <span class="status">
                                        {% if c.status == 'pending' %}
                                            <span style="color:var(--muted)">‚è≥ En attente</span>
                                        {% elseif c.status == 'accepted' %}
                                            <span style="color:rgb(19,184,194)">‚úÖ Accept√©e</span>
                                        {% else %}
                                            <span style="color:rgb(255,107,107)">‚ùå Refus√©e</span>
                                        {% endif %}
                                    </span>
                                    <a class="btn" href="{{ path('consultation_show', {'id': c.id}) }}">D√©tails</a>
                                </div>
                            </article>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="consultations__actions">
                    <a class="btn btn-primary" href="{{ path('consultation_new') }}">Nouvelle consultation</a>
                </div>
            </div>
        </div>
    </main>

</div>

{% endblock %}





