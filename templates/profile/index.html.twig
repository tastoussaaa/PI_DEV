{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}
{% set navigation = [
    {'name': 'Dashboard', 'path': path('app_' ~ current_user_type ~ '_dashboard'), 'icon': 'üè†'},
    {'name': 'Mon Profil', 'path': path('profile_index'), 'icon': 'üë§'},
] %}

<div class="portal">
    {% include 'side_bar.html.twig' %}

    <main class="portal__main">
        <div class="portal__top">
            <div>
                <h1 class="portal__title">Mon Profil</h1>
                <p class="portal__subtitle">Consultez vos informations personnelles</p>
            </div>
            <a href="{{ path('profile_edit') }}" class="btn btn--primary">Modifier le profil</a>
        </div>

        <div class="portal__content">
            <div class="box" style="max-width: 600px;">
                <h3>Informations Personnelles</h3>
                
                <div style="margin-bottom: 24px;">
                    <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Nom complet</div>
                    <div style="font-size: 16px; font-weight: 600;">{{ current_user.fullName }}</div>
                </div>

                <div style="margin-bottom: 24px;">
                    <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Email</div>
                    <div style="font-size: 16px; font-weight: 600;">{{ current_user.email }}</div>
                </div>

                <div style="margin-bottom: 24px;">
                    <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Type de compte</div>
                    <div style="font-size: 16px; font-weight: 600;">
                        {% if is_medecin %}
                            M√©decin
                        {% elseif is_patient %}
                            Patient
                        {% elseif is_aide_soignant %}
                            Aide-Soignant
                        {% else %}
                            Utilisateur
                        {% endif %}
                    </div>
                </div>

                {% if is_medecin and userEntity %}
                <div style="border-top: 1px solid #e5e7eb; padding-top: 24px;">
                    <h4 style="margin-bottom: 16px;">Informations Professionnelles</h4>
                    
                    <div style="margin-bottom: 24px;">
                        <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Sp√©cialit√©</div>
                        <div style="font-size: 16px; font-weight: 600;">{{ userEntity.specialite ?? 'Non sp√©cifi√©e' }}</div>
                    </div>

                    {% if userEntity.rpps %}
                    <div style="margin-bottom: 24px;">
                        <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Num√©ro RPPS</div>
                        <div style="font-size: 16px; font-weight: 600;">{{ userEntity.rpps }}</div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if is_patient and userEntity %}
                <div style="border-top: 1px solid #e5e7eb; padding-top: 24px;">
                    <h4 style="margin-bottom: 16px;">Informations de Sant√©</h4>
                    
                    {% if userEntity.birthDate %}
                    <div style="margin-bottom: 24px;">
                        <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Date de naissance</div>
                        <div style="font-size: 16px; font-weight: 600;">{{ userEntity.birthDate|date('d/m/Y') }}</div>
                    </div>
                    {% endif %}

                    {% if userEntity.ssn %}
                    <div style="margin-bottom: 24px;">
                        <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Num√©ro de s√©curit√© sociale</div>
                        <div style="font-size: 16px; font-weight: 600;">{{ userEntity.ssn }}</div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if is_aide_soignant and userEntity %}
                <div style="border-top: 1px solid #e5e7eb; padding-top: 24px;">
                    <h4 style="margin-bottom: 16px;">Informations Professionnelles</h4>
                    
                    {% if userEntity.adeli %}
                    <div style="margin-bottom: 24px;">
                        <div style="color: #6b7280; font-size: 14px; margin-bottom: 4px;">Num√©ro ADELI</div>
                        <div style="font-size: 16px; font-weight: 600;">{{ userEntity.adeli }}</div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </main>
</div>
{% endblock %}
