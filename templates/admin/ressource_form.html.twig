{% extends 'base.html.twig' %}

{% block title %}
	{% if ressource %}
		Modifier la ressource :
		{{ ressource.title }}
	{% else %}
		Ajouter une nouvelle ressource
	{% endif %}
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}

	{% set navigation = [
    {'name': 'Formations', 'path': path('admin_formations'), 'icon': 'üìö'},
    {'name': 'Ressources', 'path': path('admin_formation_resources', {id: formation.id}), 'icon': 'üìÇ'},
    {'name': ressource ? 'Modifier' : 'Nouvelle Ressource', 'path': '#', 'icon': '‚úèÔ∏è'}
] %}

	<div
		class="portal">
		{# Sidebar #}
		{% include 'side_bar.html.twig' %}

		<main class="portal__main">

			<div class="portal__top">
				<div>
					<h1 class="portal__title">
						{% if ressource %}
							Modifier la ressource :
							{{ ressource.title }}
						{% else %}
							Ajouter une nouvelle ressource
						{% endif %}
					</h1>
					<p class="portal__subtitle">
						{% if ressource %}
							Mettez √† jour les informations de la ressource
						{% else %}
							Remplissez les d√©tails pour ajouter une nouvelle ressource
						{% endif %}
					</p>
				</div>

				<a href="{{ path('admin_formation_resources', {id: formation.id}) }}" class="btn btn--ghost">
					‚Üê Retour
				</a>
			</div>

			<div class="box" style="max-width:600px;">

				{{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

				<div class="form__fields">

					<div class="form-group">
						{{ form_label(form.title, 'Titre de la ressource') }}
						{{ form_widget(form.title) }}
						{{ form_errors(form.title) }}
					</div>
					<div class="form-group">
						{{ form_label(form.classe, 'Classe') }}
						{{ form_widget(form.classe) }}
						{{ form_errors(form.classe) }}
					</div>

					<div class="form-group">
						{{ form_label(form.materiels, 'Mat√©riels n√©cessaires') }}
						{{ form_widget(form.materiels) }}
						{{ form_errors(form.materiels) }}
					</div>


					<div class="form-group">
						{{ form_label(form.description, 'Description') }}
						{{ form_widget(form.description) }}
						{{ form_errors(form.description) }}
					</div>

					{% if form.pdfFile is defined %}
						<div class="form-group">
							{{ form_label(form.pdfFile, 'Fichier PDF') }}
							{{ form_widget(form.pdfFile) }}
							{{ form_errors(form.pdfFile) }}

							{% if ressource and ressource.fileName %}
								<p style="margin-top:8px;">
									üìÑ Fichier actuel :
									<a href="{{ asset('uploads/pdfs/' ~ ressource.fileName) }}" target="_blank">
										Voir le PDF
									</a>
								</p>
							{% endif %}
						</div>
					{% endif %}

				</div>

				<div class="form__actions" style="margin-top:16px; display:flex; gap:10px;">
					<a href="{{ path('admin_formation_resources', {id: formation.id}) }}" class="btn btn--ghost">Annuler</a>
					<button type="submit" class="btn btn--primary">
						{% if ressource %}üíæ Modifier{% else %}‚ûï Ajouter
						{% endif %}
					</button>
				</div>

				{{ form_end(form) }}


			</div>

		</main>
	</div>

{% endblock %}
