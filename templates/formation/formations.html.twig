{% extends 'base.html.twig' %}

{% block title %}Formations Disponibles
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}

	{% set navigation = [
    {'name': 'Dashboard', 'path': path('medecin_dashboard'), 'icon': 'üè†'},
    {'name': 'Consultations', 'path': path('medecin_consultations'), 'icon': 'ü©∫'},
    {'name': 'Formations', 'path': path('medecin_formations'), 'icon': 'üìö'},
    {'name': 'Nouvelle Formation', 'path': path('medecin_formation_new'), 'icon': '‚ûï'}
] %}

	<div
		class="portal">

		{# Sidebar #}
		{% include 'side_bar.html.twig' %}

		<main class="portal__main">
			<div class="portal__top">
				<div>
					<h1 class="portal__title">Formations Disponibles</h1>
					<p class="portal__subtitle">Consultez et explorez toutes les formations disponibles</p>
				</div>
				<a href="{{ path('medecin_formation_new') }}" class="btn btn--primary">Cr√©er une formation</a>
			</div>

			{# Filter by category #}
			<div class="filter" style="margin-bottom: 20px;">
				<form method="get" action="{{ path('aidesoignant_formations') }}">
					<label for="category">Filtrer par cat√©gorie :</label>
					<select name="category" id="category" onchange="this.form.submit()">
						<option value="">Toutes</option>
						{% for cat in categories %}
							<option value="{{ cat }}" {% if cat == selectedCategory %} selected {% endif %}>{{ cat }}</option>
						{% endfor %}
					</select>
				</form>
			</div>

			{% if formations is empty %}
				<div class="box">
					<p>Aucune formation disponible pour le moment.</p>
				</div>
			{% else %}
				<div class="cards">
					<div class="cards__grid">
						{% for formation in formations %}
							<div class="card">
								<h3>{{ formation.title }}</h3>
								<p>{{ formation.description|length > 100 ? formation.description|slice(0, 100) ~ '‚Ä¶' : formation.description }}</p>
								<div class="card__footer">
									<span class="pill">{{ formation.category }}</span>
									<span>{{ formation.startDate ? formation.startDate|date('d/m/Y') : '' }}
										-
										{{ formation.endDate ? formation.endDate|date('d/m/Y') : '' }}</span>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			{% endif %}
		</main>
	</div>
{% endblock %}
