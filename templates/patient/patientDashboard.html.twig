{% extends 'base.html.twig' %}

{% block title %}Dashboard M√©decin{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/medecin/dashboard.css') }}">
{% endblock %}

{% block body %}
{% set navigation = [
    {'name': 'Dashboard', 'path': path('app_patient_dashboard'), 'icon': 'üè†'},
    {'name': 'Consultations', 'path': path('patient_consultations'), 'icon': 'ü©∫'},
    {'name': 'Nouvelle consultation', 'path': path('consultation_new'), 'icon': '‚ûï'},
    {'name': 'Produits', 'path': path('produit_list'), 'icon': 'üõí'},
    {'name': 'Mes commandes', 'path': path('commande_index'), 'icon': 'üìã'}
] %}

<div class="portal">

    <!-- SIDEBAR -->
    {% include 'side_bar.html.twig' %}



    <!-- MAIN CONTENT -->
    <main class="portal__main">

        <div class="portal__top">
            <div>
                <h1 class="portal__title">Dashboard</h1>
                <p class="portal__subtitle">Vue d'ensemble de vos consultations</p>
            </div>

            <a href="{{ path('consultation_new') }}" class="btn btn--primary">Nouvelle Consultation</a>
        </div>

        <div class="portal__content">

            <div class="box">
                <h3>Mes Consultations</h3>
                {% if consultations is empty %}
                    <p style="color:var(--muted)">Vous n'avez pas encore cr√©√© de consultation.</p>
                    <a href="{{ path('consultation_new') }}" class="btn btn--primary" style="margin-top:12px">Cr√©er une consultation</a>
                {% else %}
                    <div class="boxGrid" style="display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))">
                        {% for consultation in consultations %}
                            <div style="border:1px solid rgba(7,19,31,.10);border-radius:12px;padding:16px">
                                <div style="display:flex;justify-content:space-between;align-items:start;gap:8px">
                                    <div>
                                        <h4 style="margin:0 0 4px">{{ consultation.motif }}</h4>
                                        <div style="color:var(--muted);font-size:13px">
                                            {{ consultation.dateConsultation ? consultation.dateConsultation|date('d M Y H:i') : 'Date non d√©finie' }}
                                        </div>
                                    </div>
                                    <div style="display:flex;gap:4px;justify-content:flex-end">
                                        {% if consultation.status == 'pending' %}
                                            <span style="background:rgba(255,193,7,.15);color:#FF9F00;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:900">‚è≥ En attente</span>
                                        {% elseif consultation.status == 'accepted' %}
                                            <span style="background:rgba(19,184,194,.15);color:#13B8C2;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:900">‚úÖ Accept√©e</span>
                                        {% elseif consultation.status == 'declined' %}
                                            <span style="background:rgba(255,107,107,.15);color:#FF6B6B;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:900">‚ùå Refus√©e</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(7,19,31,.05)">
                                    <a href="{{ path('consultation_show', {'id': consultation.id}) }}" class="btn btn--ghost" style="width:100%;text-align:center">Voir les d√©tails</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

        </div>

    </main>

</div>

{% endblock %}





